{{define "root.html"}}
<!DOCTYPE html>
<html lang="en">

<head>
  {{template "components/commonHead.html" .}}
</head>


{{if .PageError}}
{{template "components/errorBody.html" .}}
{{else}}

<body class="bg-surface min-h-screen flex flex-row justify-start transition-colors text-on-surface">
  <!-- Sidebar -->
  {{template "components/sidebar.html" .}}

  <!-- Main content area -->
  <div class="min-h-screen w-full lg:ml-64 ml-1/12">
    <header
      class="lg:hidden bg-container border-b border-container h-1/12 flex items-center justify-start px-4 space-x-1 sticky top-0 z-30"
    >

      <!-- Mobile Open Button -->
      <button
        x-data
        @click="$store.sidebarState.setOpen(true)"
        class="lg:hidden text-muted-on-container hover:text-on-container"
      >
        <span
          x-data
          x-html="icon('menu', 'h-6 w-6 stroke-muted-on-container hover:stroke-on-container', '0 0 24 24')"
        ></span>
      </button>

      <!-- Title -->
      <div class="flex items-center justify-around space-x-2">
        <img
          src="/logo.png"
          alt="Logo"
          class="size-8 rounded-md shadow-md"
        >
        <span class="text-lg font-semibold text-on-container">{{.AppName}}</span>
        <h1 class="text-xl font-semibold text-on-container">{{.Title}}</h1>
      </div>
    </header>

    <!-- Page content -->
    <main class="p-3 lg:p-6 min-h-11/12 lg:min-h-full w-full flex flex-col items-center justify-start gap-4">
      <!-- Alerts and Actions Component -->
      {{template "components/alertsAndActions.html" .}}

      <!-- Profile Card -->
      <div class="w-full lg:max-w-2xl bg-container/50 shadow-sm rounded-xl border border-separator-on-container">
        <div class="p-6">
          <h2 class="text-lg font-semibold leading-6 text-on-container">Profile Overview</h2>
          <p class="mt-1 text-sm text-muted-on-container">Your personal account details.</p>
        </div>
        <div class="border-t border-separator-on-container">
          <dl class="divide-y divide-separator-on-container">
            <!-- First Name -->
            <div class="px-6 py-5 grid grid-cols-3 gap-4">
              <dt class="text-sm font-medium text-muted-on-container">First Name</dt>
              <dd class="text-sm text-on-container col-span-2">{{.User.FirstName}}</dd>
            </div>

            <!-- Last Name -->
            <div class="px-6 py-5 grid grid-cols-3 gap-4">
              <dt class="text-sm font-medium text-muted-on-container">Last Name</dt>
              <dd class="text-sm text-on-container col-span-2">{{.User.LastName}}</dd>
            </div>

            <!-- Email Address -->
            <div class="px-6 py-5 grid grid-cols-3 gap-4">
              <dt class="text-sm font-medium text-muted-on-container">Email address</dt>
              <dd class="text-sm text-on-container col-span-2">{{.User.Email}}</dd>
            </div>

            <!-- Email Verified -->
            <div class="px-6 py-5 grid grid-cols-3 gap-4">
              <dt class="text-sm font-medium text-muted-on-container">Email verified</dt>
              <dd class="text-sm text-on-container col-span-2 flex items-center">
                <span
                  x-data
                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
                  :class="{ 'bg-success-bg text-on-success': {{.User.EmailVerified}}, 'bg-warning-bg text-on-warning': !{{.User.EmailVerified}} }"
                >
                  <svg
                    class="-ml-0.5 mr-1.5 h-2 w-2"
                    :class="{ 'text-success': {{.User.EmailVerified}}, 'text-warning': !{{.User.EmailVerified}} }"
                    fill="currentColor"
                    viewBox="0 0 8 8"
                  >
                    <circle
                      cx="4"
                      cy="4"
                      r="3"
                    ></circle>
                  </svg>
                  {{if .User.EmailVerified}} Verified {{else}} Not Verified {{end}}
                </span>
              </dd>
            </div>

            <!-- Member Since -->
            <div class="px-6 py-5 grid grid-cols-3 gap-4">
              <dt class="text-sm font-medium text-muted-on-container">Member since</dt>
              <dd class="text-sm text-on-container col-span-2">{{.User.CreatedAt.Time.Format "January 2, 2006"}}</dd>
            </div>
          </dl>
        </div>
      </div>

      <!-- Avatar Card -->
      <div class="w-full lg:max-w-2xl bg-container/50 shadow-sm rounded-xl border border-separator-on-container">
        <div class="p-6">
          <h2 class="text-lg font-semibold leading-6 text-on-container">Avatar</h2>
          <p class="mt-1 text-sm text-muted-on-container">Your profile picture.</p>
        </div>
        <div class="border-t border-separator-on-container">
          <div class="px-6 py-5 flex flex-col items-center">
            {{if .User.AvatarUrl}}
            <img
              class="h-24 w-24 rounded-full object-cover"
              src="{{.User.AvatarUrl}}"
              alt="{{.User.FirstName}} {{.User.LastName}}'s avatar"
            />
            {{else}}
            <span
              x-data
              x-html="icon('user', 'h-24 w-24 stroke-on-container')"
            ></span>
            {{end}}

            <!-- Change Avatar Button -->
            <button
              type="button"
              x-data
              @click="window.location.assign('/update-avatar')"
              class="mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-on-accent bg-accent hover:bg-accent-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent"
            >
              <span
                x-data
                x-html="icon('pencil', 'h-4 w-4 stroke-on-accent')"
              ></span>
              <span class="ml-2">Change</span>
            </button>
          </div>
        </div>
      </div>
    </main>
  </div>
</body>

{{end}}

</html>

{{end}}